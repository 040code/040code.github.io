{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017/07/01/visualising-bezier-curves","webpackCompilationHash":"4a86779ccf4d1b44ab75","result":{"data":{"markdownRemark":{"id":"25498c9e-884a-5674-b068-f5a96b61d6d5","excerpt":"For reasons I might explain in another post, I was reading about Bézier curves on wikipedia the other day. Especially the paragraph on…","html":"<p>For reasons I might explain in another post, I was reading about <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve\">Bézier curves on wikipedia</a> the other day. Especially the paragraph on “Constructing Bézier curves” made me understand intuitively how these curves are constructed. I wondered if <code class=\"language-text\">clojure</code> could help me easily visualise some of these curves so I fired up a <a href=\"https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop\">REPL</a> (Read-Eval-Print-Loop) to investigate.</p>\n<h2 id=\"setup\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<p>I assume you have a working <a href=\"https://leiningen.org\">leiningen</a> setup with the <a href=\"https://github.com/rkneufeld/lein-try\">lein-try plugin</a> installed.</p>\n<ul>\n<li>Leiningen will help you get started with <code class=\"language-text\">clojure</code> right away from your shell</li>\n<li>Lein-try enables you to spin up a repl and try a library without any hassle.</li>\n</ul>\n<p>Let’s first start a repl, and specify the library we want to try:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">lein try incanter <span class=\"token string\">\"1.5.7\"</span></code></pre></div>\n<p><a href=\"http://incanter.org\">Incanter</a> is a <code class=\"language-text\">clojure</code>-based, R-like platform for statistical computing and graphics. We’ll use it to visualise the Bézier curves.</p>\n<p>Since the repl is already fired up, let’s immediately require the dependencies we’ll need:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span>require '<span class=\"token punctuation\">[</span>incanter.core   <span class=\"token operator\">:as</span> incanter<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>require '<span class=\"token punctuation\">[</span>incanter.charts <span class=\"token operator\">:as</span> charts<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Nothing fancy going on here. Simply ‘import’ statements the <code class=\"language-text\">clojure</code> way.</p>\n<h2 id=\"helper-function\"><a href=\"#helper-function\" aria-label=\"helper function permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Helper function</h2>\n<p>I decided to hand-roll my own <code class=\"language-text\">pow</code> function, because we’ll need it later in the creation of bézier curves:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> pow <span class=\"token punctuation\">[</span>base exponent<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">reduce</span> *' <span class=\"token punctuation\">(</span><span class=\"token keyword\">repeat</span> exponent base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>This function basically says:</p>\n<ul>\n<li>define a function named <code class=\"language-text\">pow</code></li>\n<li>let <code class=\"language-text\">base</code> and <code class=\"language-text\">exponent</code> be its arguments</li>\n<li>make it <code class=\"language-text\">repeat</code> the <code class=\"language-text\">base</code> <code class=\"language-text\">exponent</code> times</li>\n<li>and <code class=\"language-text\">reduce</code> that result with the <code class=\"language-text\">*&#39;</code> multiply function</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token comment\">;; so:</span>\n<span class=\"token punctuation\">(</span>pow <span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">;; will lead to</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">reduce</span> *' <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">;; which results in</span>\n<span class=\"token number\">8</span></code></pre></div>\n<p>I’m using the <code class=\"language-text\">*&#39;</code> multiply function instead of the normal <code class=\"language-text\">*</code> multiply function, because according to the docs <code class=\"language-text\">*&#39;</code> supports arbitrary precision. You can see for yourself by typing <code class=\"language-text\">(doc *&#39;)</code> in your repl, or study the code by typing <code class=\"language-text\">(source *&#39;)</code> in your repl.</p>\n<h2 id=\"bézier\"><a href=\"#b%C3%A9zier\" aria-label=\"bézier permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bézier</h2>\n<p>Bézier functions work with control points. The minimum number of control points is 2 and Bézier curves with 2 control points are straight lines (although you can also create straight lines with more than 2 control points).</p>\n<p>For the moment I only need Bézier curves with 3 control points: a start point, an end point and one point controlling the curve of the line between start and end.</p>\n<p>Quoting the <a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve\">Wikipedia page</a>: “A quadratic Bézier curve is the path traced by the function B(t), given points P0, P1, and P2”:</p>\n<a href=\"#\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 6.487695749440715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAARElEQVQI1x3IMQ4AIQgF0b3/AWkslNBRABKD5TdLMZnkfXNOqCqqCmbWZ2astXDvhYi0uTuICOccRATGGNh7t/+Wmd0D29ZLPTdV80IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/b1db3caa87d4878344715c08553bba4e/cc182/bezier-formula.webp 148w,\n/static/b1db3caa87d4878344715c08553bba4e/f7e40/bezier-formula.webp 295w,\n/static/b1db3caa87d4878344715c08553bba4e/1a2f4/bezier-formula.webp 590w,\n/static/b1db3caa87d4878344715c08553bba4e/4837b/bezier-formula.webp 885w,\n/static/b1db3caa87d4878344715c08553bba4e/2f819/bezier-formula.webp 1180w,\n/static/b1db3caa87d4878344715c08553bba4e/da990/bezier-formula.webp 1788w\" sizes=\"(max-width: 590px) 100vw, 590px\" type=\"image/webp\">\n        <source srcset=\"/static/b1db3caa87d4878344715c08553bba4e/cf440/bezier-formula.png 148w,\n/static/b1db3caa87d4878344715c08553bba4e/d2d38/bezier-formula.png 295w,\n/static/b1db3caa87d4878344715c08553bba4e/b9e4f/bezier-formula.png 590w,\n/static/b1db3caa87d4878344715c08553bba4e/f9b6a/bezier-formula.png 885w,\n/static/b1db3caa87d4878344715c08553bba4e/2d849/bezier-formula.png 1180w,\n/static/b1db3caa87d4878344715c08553bba4e/435fe/bezier-formula.png 1788w\" sizes=\"(max-width: 590px) 100vw, 590px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/b1db3caa87d4878344715c08553bba4e/b9e4f/bezier-formula.png\" alt=\"bezier-formula\" title=\"bezier-formula\" loading=\"lazy\">\n      </picture>\n    </span>\n</a>\n<p>So given 3 points (P0, P1 and P2) I should be able to describe the curve with this math function. Conceptually a pen is drawing the curve by starting on P0 on moment <code class=\"language-text\">t = 0</code> and following the curve described by this formula and the position of the 3 points until it hits the end point at <code class=\"language-text\">t = 1</code>. The only thing this resulting <code class=\"language-text\">B(t)</code> function needs is the moment <code class=\"language-text\">t</code> and it will calculate the X or Y coördinate at that particular moment.</p>\n<p>Let’s convert the math function to <code class=\"language-text\">clojure</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> bezier-<span class=\"token number\">3</span> <span class=\"token punctuation\">[</span>P0 P1 P2<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">fn</span> <span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">+</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">*</span> <span class=\"token punctuation\">(</span>pow <span class=\"token punctuation\">(</span><span class=\"token keyword\">-</span> <span class=\"token number\">1</span> t<span class=\"token punctuation\">)</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> P0<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">*</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">-</span> <span class=\"token number\">1</span> t<span class=\"token punctuation\">)</span> t     P1<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">*</span> <span class=\"token punctuation\">(</span>pow t <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>       P2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>As you can see, you’ll have to translate the infix notation to <code class=\"language-text\">clojure</code>’s prefix notation. The advantage is there are no precedence rules to remember anymore. These are all just lists where the first element of the list is interpreted as a function to call and the brackets are used to put them into context. <em>(If you can’t live with that: you can also use infix notation in clojure. For instance incanter can also be fed with <a href=\"https://data-sorcery.org/2010/05/14/infix-math/\">infix notation</a>. However, you’ll lose [the power of the 𝝺](<a href=\"https://en.wikipedia.org/wiki/Lambda\">https://en.wikipedia.org/wiki/Lambda</a></em>calculus))_</p>\n<p>This function basically states:</p>\n<ul>\n<li>define a function named <code class=\"language-text\">bezier-3</code></li>\n<li>let it have 3 arguments: <code class=\"language-text\">P0</code>, <code class=\"language-text\">P1</code> and <code class=\"language-text\">P2</code></li>\n<li>make it return an anonymous function</li>\n</ul>\n<p>This anonymous function:</p>\n<ul>\n<li>takes <code class=\"language-text\">t</code> as an argument</li>\n<li>has <code class=\"language-text\">P0</code>, <code class=\"language-text\">P1</code> and <code class=\"language-text\">P2</code> already ‘injected’</li>\n<li>applies the Bézier math function</li>\n</ul>\n<p>Excellent. Let’s try it:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">def</span> test-<span class=\"token number\">b3</span> <span class=\"token punctuation\">(</span>bezier-<span class=\"token number\">3</span> <span class=\"token number\">1</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span>test-<span class=\"token number\">b3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">=</span>> <span class=\"token number\">1</span></code></pre></div>\n<p>Here I’m defining a variable <code class=\"language-text\">test-b3</code> which holds the anonymous function returned by the <code class=\"language-text\">bezier-3</code> function call. The 3 points are either all x or all y coordinates of the points P0, P1 and P2.</p>\n<p>With the <code class=\"language-text\">(test-b3 0)</code> function call I’m calling the anonymous function with a <code class=\"language-text\">t</code> value of <code class=\"language-text\">0</code>. This nicely returns an answer representing the x coordinates at moment <code class=\"language-text\">t</code> if you provided the (P0, P1 and P2) x coordinates when calling the <code class=\"language-text\">bezier-3</code> function or the y coordinate at moment <code class=\"language-text\">t</code> if you provided the (P0, P1 and P2) y coordinates.</p>\n<p>Since this test didn’t blow the stack or throw a NullPointerException or anything,  let’s map this function over a range of <code class=\"language-text\">t</code>’s <code class=\"language-text\">[0 0.25 0.5 0.75 1]</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">map</span> test-<span class=\"token number\">b3</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span>.<span class=\"token number\">25</span> <span class=\"token number\">0</span>.<span class=\"token number\">5</span> <span class=\"token number\">0</span>.<span class=\"token number\">75</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">=</span>> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token number\">0</span>.<span class=\"token number\">9375</span> <span class=\"token number\">0</span>.<span class=\"token number\">75</span> <span class=\"token number\">0</span>.<span class=\"token number\">4375</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Instead of typing these <code class=\"language-text\">t</code>’s to <code class=\"language-text\">map</code> over, we could also use the <code class=\"language-text\">range</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">=</span>> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span> <span class=\"token number\">5</span> <span class=\"token number\">6</span> <span class=\"token number\">7</span> <span class=\"token number\">8</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">10</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">=</span>> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> <span class=\"token number\">2</span> <span class=\"token number\">4</span> <span class=\"token number\">6</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>As you can see, <code class=\"language-text\">range</code> allows you to specify a start (inclusive), an end (exclusive) and a step size (optional).</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">map</span> test-<span class=\"token number\">b3</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span>.<span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">=</span>> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token number\">0</span>.<span class=\"token number\">9900000000000001</span> <span class=\"token number\">0</span>.<span class=\"token number\">9600000000000002</span> <span class=\"token number\">0</span>.<span class=\"token number\">9099999999999999</span> <span class=\"token number\">0</span>.<span class=\"token number\">84</span> <span class=\"token number\">0</span>.<span class=\"token number\">75</span> <span class=\"token number\">0</span>.<span class=\"token number\">64</span> <span class=\"token number\">0</span>.<span class=\"token number\">51</span> <span class=\"token number\">0</span>.<span class=\"token number\">3600000000000001</span> <span class=\"token number\">0</span>.<span class=\"token number\">19000000000000014</span> <span class=\"token number\">2</span>.<span class=\"token number\">220446049250313E</span>-<span class=\"token number\">16</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Although a certain pattern is already visible in these numbers, now might be the right time to start visualising the curves.</p>\n<h2 id=\"visualise\"><a href=\"#visualise\" aria-label=\"visualise permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Visualise</h2>\n<p>Let’s be brave and go right to the essence:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> view-bezier-plot <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>x1 y1<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>x2 y2<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>x3 y3<span class=\"token punctuation\">]</span> plot-title<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>b3x         <span class=\"token punctuation\">(</span>bezier-<span class=\"token number\">3</span> x1 x2 x3<span class=\"token punctuation\">)</span>\n        xs          <span class=\"token punctuation\">(</span><span class=\"token keyword\">map</span> b3x <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>.<span class=\"token number\">0</span> <span class=\"token number\">0</span>.<span class=\"token number\">01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        b3y         <span class=\"token punctuation\">(</span>bezier-<span class=\"token number\">3</span> y1 y2 y3<span class=\"token punctuation\">)</span>\n        ys          <span class=\"token punctuation\">(</span><span class=\"token keyword\">map</span> b3y <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>.<span class=\"token number\">0</span> <span class=\"token number\">0</span>.<span class=\"token number\">01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        dataset     <span class=\"token punctuation\">(</span>incanter/conj-cols xs ys<span class=\"token punctuation\">)</span>\n        xy-plot     <span class=\"token punctuation\">(</span>charts/xy-plot <span class=\"token string\">\"col-0\"</span> <span class=\"token string\">\"col-1\"</span> <span class=\"token operator\">:data</span> dataset <span class=\"token operator\">:points</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:title</span> plot-title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span>incanter/view xy-plot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The <code class=\"language-text\">let</code> form is <code class=\"language-text\">clojure</code>’s way of defining local variables. So <code class=\"language-text\">b3x</code>, <code class=\"language-text\">xs</code>, <code class=\"language-text\">b3y</code>, etc. can be seen as local variables with their values specified in the functions directly after their declaration.</p>\n<p>This function basically states:</p>\n<ul>\n<li>define a function named <code class=\"language-text\">view-bezier-plot</code></li>\n<li>let it have 3 arguments which are destructured into their 2D x &#x26; y coordinates</li>\n<li>let the fourth argument be the title of the plot</li>\n<li>\n<p><code class=\"language-text\">let</code> it have some local variables:</p>\n<ul>\n<li><code class=\"language-text\">b3x</code> takes all x coordinates of the 3 points</li>\n<li><code class=\"language-text\">b3y</code> takes the y coordinates</li>\n<li><code class=\"language-text\">xs</code> are the all x values resulting from applying the <code class=\"language-text\">b3x</code> anonymous function with all the range values</li>\n<li><code class=\"language-text\">ys</code> are the all y values resulting from applying the <code class=\"language-text\">b3y</code> anonymous function with all the range values</li>\n<li>incanter can work with columns similarly to spreadsheets. <code class=\"language-text\">dataset</code> is an incanter dataset where 2 columns are ‘brought together’, or in <a href=\"https://en.wikipedia.org/wiki/Lisp_(programming_language)\">lisp</a> terms <code class=\"language-text\">conj</code>[oined]. By default, these columns are called <code class=\"language-text\">col-0</code>, <code class=\"language-text\">col-1</code>, … , <code class=\"language-text\">col-n</code></li>\n<li>xy-plot contains an incanter chart where <code class=\"language-text\">dataset</code> provides the data, the x-axis - and y-axis values are found in columns <code class=\"language-text\">col-0</code> and <code class=\"language-text\">col-1</code> respectively and viewing the points is set to <code class=\"language-text\">true</code></li>\n</ul>\n</li>\n<li>and make it return an <code class=\"language-text\">xy-plot</code></li>\n</ul>\n<h2 id=\"i-love-it-when-a-plan-comes-together\"><a href=\"#i-love-it-when-a-plan-comes-together\" aria-label=\"i love it when a plan comes together permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>I love it when a plan comes together</h2>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span>view-bezier-plot <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"increasing ascending\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span>view-bezier-plot <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> -<span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"swoosh\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span>view-bezier-plot <span class=\"token punctuation\">[</span>-<span class=\"token number\">2</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> -<span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"y = x^2 ?\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span>view-bezier-plot <span class=\"token punctuation\">[</span>-<span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"my pulse after a useless meeting\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<a href=\"#\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80.1564027370479%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACeUlEQVQ4y21UCZKiQBDk/88bj9HxAg9Q6ANoUNDV2sxSDGdjjajowzoyq7KJqqqS8/ksbdvK6XSS/X4vaZpKdjxK0zTS9b3UIYi1Vi6Xy9voe4SPnhF/6TrNEfUI4KYsSw2iOefEGCMligXsPYoE+LAw/eq6Vh8aAVUoXOe5BMREHTLTKcdFURRvM7AcDgWSmckEQSjq/duPBelTAIDZbcUsl+KwjwiZCd9Og9EZ926xEBPHUoF2DTS//FDAJom41VIKnD3OkdLFZkBlXgFMZoHOj0bqzKIVqBZAaNgSUiYqJDOvFmlCRYjKOeAW+EMNDberlbivLzHYk3qN+xrDyhmcHsShDXazUX/zahN7qkMJPCBB+fPztPlMyvVaLFGgKgNCi0kigR+PpZzNxGPCDkCGIXIli4gTa/BHg0PjnTREgrsA5AF9o3TYEmtOUje1tNg3mHbNe8ZgZdvoy4lH5E2dBUyRThkoZlkmgUmZEM75KZc0nsv2uJXVeiMLsJgB5XQ6lSX6uMDgqF0qIPpzv0uHpBU1hSQsQESqL+oQd4fNWtpLJ/x5/6RHP9onXUXY324qygLT0sEMesTKYVAWyfe3Cps/9pX3/zPGRdfrVSkb0DBFrhIZJMTVg1ICHbKvj8dDHFpS7HZiDgcYRL//MPynL4VPx8Sbpww4VaJ8idbjLkECtuEKNn67FQvEdj7/beipRZHoRsqonlM60wk0huby5VAW0BoFGwMhp6mU+fzQGurxX+MzfFJGQkM9AXI5HinNEnpzWSoOyRMgHRJyCPpaPt7z5wtTyhR3zxXJe36OMC2uPJMBP1Oc4B2K+PyEta8vEPfMQ5n9BVXttyTQGYnbAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/f3b08b6678464a9c1d1a938bf03381a7/cc182/incanter-plots.webp 148w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/f7e40/incanter-plots.webp 295w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/1a2f4/incanter-plots.webp 590w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/4837b/incanter-plots.webp 885w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/2f819/incanter-plots.webp 1180w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/03ee7/incanter-plots.webp 2046w\" sizes=\"(max-width: 590px) 100vw, 590px\" type=\"image/webp\">\n        <source srcset=\"/static/f3b08b6678464a9c1d1a938bf03381a7/cf440/incanter-plots.png 148w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/d2d38/incanter-plots.png 295w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/b9e4f/incanter-plots.png 590w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/f9b6a/incanter-plots.png 885w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/2d849/incanter-plots.png 1180w,\n/static/f3b08b6678464a9c1d1a938bf03381a7/aa8a7/incanter-plots.png 2046w\" sizes=\"(max-width: 590px) 100vw, 590px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/f3b08b6678464a9c1d1a938bf03381a7/b9e4f/incanter-plots.png\" alt=\"incanter-plots\" title=\"incanter-plots\" loading=\"lazy\">\n      </picture>\n    </span>\n</a>\n<p>The generated charts will be opened in external java windows. Sometimes they stay hidden behind other windows on your screen, so you might have to bring your java windows to the foreground in order to see them.</p>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>In a relatively short repl session I was able to get a better understanding of (3 point) Bézier curves. Although the blogpost is long, not much code or time was needed to create the curves:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span>require '<span class=\"token punctuation\">[</span>incanter.core   <span class=\"token operator\">:as</span> incanter<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>require '<span class=\"token punctuation\">[</span>incanter.charts <span class=\"token operator\">:as</span> charts<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> pow <span class=\"token punctuation\">[</span>base exponent<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">reduce</span> *' <span class=\"token punctuation\">(</span><span class=\"token keyword\">repeat</span> exponent base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> bezier-<span class=\"token number\">3</span> <span class=\"token punctuation\">[</span>P0 P1 P2<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">fn</span> <span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">+</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">*</span> <span class=\"token punctuation\">(</span>pow <span class=\"token punctuation\">(</span><span class=\"token keyword\">-</span> <span class=\"token number\">1</span> t<span class=\"token punctuation\">)</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> P0<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">*</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">-</span> <span class=\"token number\">1</span> t<span class=\"token punctuation\">)</span> t     P1<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">*</span> <span class=\"token punctuation\">(</span>pow t <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>       P2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> view-bezier-plot <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>x1 y1<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>x2 y2<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>x3 y3<span class=\"token punctuation\">]</span> plot-title<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>b3x         <span class=\"token punctuation\">(</span>bezier-<span class=\"token number\">3</span> x1 x2 x3<span class=\"token punctuation\">)</span>\n        xs          <span class=\"token punctuation\">(</span><span class=\"token keyword\">map</span> b3x <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>.<span class=\"token number\">0</span> <span class=\"token number\">0</span>.<span class=\"token number\">01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        b3y         <span class=\"token punctuation\">(</span>bezier-<span class=\"token number\">3</span> y1 y2 y3<span class=\"token punctuation\">)</span>\n        ys          <span class=\"token punctuation\">(</span><span class=\"token keyword\">map</span> b3y <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span>.<span class=\"token number\">0</span> <span class=\"token number\">0</span>.<span class=\"token number\">01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        dataset     <span class=\"token punctuation\">(</span>incanter/conj-cols xs ys<span class=\"token punctuation\">)</span>\n        xy-plot     <span class=\"token punctuation\">(</span>charts/xy-plot <span class=\"token string\">\"col-0\"</span> <span class=\"token string\">\"col-1\"</span> <span class=\"token operator\">:data</span> dataset <span class=\"token operator\">:points</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:title</span> plot-title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span>incanter/view xy-plot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Actually, the hand-rolled <code class=\"language-text\">pow</code> function isn’t really needed. I could have used <code class=\"language-text\">clojure</code>’s java interop: <code class=\"language-text\">(Math/pow 2 3)</code>. In that case I would have been calling the <code class=\"language-text\">pow</code> method directly on java’s <code class=\"language-text\">Math</code> class. I weighted the option of hand-rolling the <code class=\"language-text\">pow</code> function, showing some functional code and explaining how functions are defined in <code class=\"language-text\">clojure</code> versus explaining java interop.</p>\n<p>Explaining in text what the code does took me 5 times as long as writing the code itself. That’s a great thing about <a href=\"https://en.wikipedia.org/wiki/Lisp_(programming_language)\">lisps</a> in general and <code class=\"language-text\">clojure</code> in particular: no fluff, just stuff!</p>\n<p>Thanks Niek for posting my guest blog. Please share your comments, suggestions and thoughts about this blog with me on <a href=\"https://twitter.com/mmz_\">twitter.com/mmz_</a>. Thanks for reading and Happy Coding!</p>\n<h2 id=\"links\"><a href=\"#links\" aria-label=\"links permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Links</h2>\n<ul>\n<li><a href=\"https://gist.github.com/mmzsource/833ddfb2cf87c54fe4fc26996466cd1d\">A gist with the code from this post</a></li>\n<li><a href=\"https://clojure.org\">Clojure website</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Lisp_(programming_language)\">Lisps or LIst Processing Language</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Lambda_calculus\">𝝺 calculus</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop\">REPL or Read Eval Print Loop</a></li>\n<li><a href=\"http://www.davidtanzer.net/rdd_and_tests\">REPL Driven Development</a> - a blog which is a bit outdated on the test part, because nowadays, with <a href=\"https://clojure.org/about/spec\">clojure spec</a> we easily generate our tests and test data by specifying our data structures, functions, etc. in <code class=\"language-text\">clojure</code> itself. With proper specs, you’ll get even more than generative testing; you’ll get validation, better error reporting, destructuring and type- and range checking in one go - without losing the power &#x26; pleasure of a dynamic programming language!</li>\n<li><a href=\"https://leiningen.org\">Leiningen</a></li>\n<li><a href=\"https://github.com/rkneufeld/lein-try\">Lein-try plugin</a></li>\n<li><a href=\"http://incanter.org\">Incanter</a></li>\n<li><a href=\"https://data-sorcery.org/2010/05/14/infix-math/\">Incanter infix notation</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve\">Wikipedia page on Bézier curves</a></li>\n<li><a href=\"https://plus.maths.org/content/formula-bezier-curve\">The formula for a bezier curve</a></li>\n<li><a href=\"http://blogs.sitepointstatic.com/examples/tech/canvas-curves/bezier-curve.html\">Play around with bézier curves with 4 control points</a></li>\n</ul>","frontmatter":{"title":"Visualising Bézier Curves","subtitle":"Experimenting with Clojure","date":"2017-07-01","slug":"2017/07/01/visualising-bezier-curves","language":null,"tags":["clojure","bézier","functional","incanter"],"authors":["maarten"],"comments":false,"cover":{"publicURL":"/static/htc-06b63a032c22422dd87709dd0c84a427.jpg"},"coverLink":null,"coverDescription":null,"imageTw":{"publicURL":"/static/2017-07-01-visualising-bezier-curves-tw-9b9691be8a03fb262d178136a2228fb5.png"},"imageFb":{"publicURL":"/static/2017-07-01-visualising-bezier-curves-fb-33e505693a4ca6d586cd83277a18be5f.png"},"asciinema":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"2017/07/01/visualising-bezier-curves","previous":{"frontmatter":{"title":"Coding a VPC in Terraform","slug":"2017/06/18/coding-a-vpc-in-terraform","type":"post","tags":["aws","terraform"],"authors":["niek"]}},"next":{"frontmatter":{"title":"Visualising Bézier Curves Part II","slug":"2017/07/12/visualizing-bezier-curves-part-2","type":"post","tags":["clojure","clojurescript","bézier","functional","klipse","canvas"],"authors":["maarten"]}}}}}