{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/05/25/getting-help-from-your-compiler","result":{"data":{"markdownRemark":{"id":"1b0690f3-4a5b-5a2b-a572-ae8aa8c3b894","excerpt":"I‚Äôm learning about functional programming. I‚Äôm having loads of fun doing that,\nbut I also think my code is improving because of it. In this‚Ä¶","html":"<p><em>I‚Äôm learning about functional programming. I‚Äôm having loads of fun doing that,\nbut I also think my code is improving because of it. In this post I want to\nshare something that I learned about using Either to do form validation in\nTypeScript.</em></p>\n<p style=\"text-align: right\">\n  <a href=\"https://github.com/svdo/either-validation-demo\" target=\"sourcecode\">\n  <i class=\"fab fa-github\" style=\"font-size: 200%\">&nbsp;</i>Source code for this post</a></p>\n<h2 id=\"contents\" style=\"position:relative;\"><a href=\"#contents\" aria-label=\"contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contents</h2>\n<ul>\n<li><a href=\"#the-case-for-non-breaking-switches\">The Case for Non-Breaking Switches</a></li>\n<li><a href=\"#clever-data-types-can-help-too\">Clever Data Types can Help Too</a></li>\n<li><a href=\"#the-scary-bit-\">The Scary Bit üò±</a></li>\n<li><a href=\"#using-this-in-the-ui\">Using This In The UI</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n<li><a href=\"#a-new-vocabulary\">A New Vocabulary</a></li>\n<li><a href=\"#appendix-lift-and-lift2\">Appendix: lift and lift2</a></li>\n</ul>\n<h2 id=\"the-case-for-non-breaking-switches\" style=\"position:relative;\"><a href=\"#the-case-for-non-breaking-switches\" aria-label=\"the case for non breaking switches permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Case for Non-Breaking Switches</h2>\n<p>Some (well, many I guess) programming languages have a construct called a\n<code class=\"language-text\">switch</code> statement. It usually looks something like this (in JavaScript):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">commentOnDinnerPreference</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">pref</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> reply <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>pref<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'broccoli'</span><span class=\"token operator\">:</span>\n      reply <span class=\"token operator\">=</span> <span class=\"token string\">'yes, very healthy'</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'pizza hawaii'</span><span class=\"token operator\">:</span>\n      reply <span class=\"token operator\">=</span> <span class=\"token string\">'who does not like carbs and fat?'</span>\n  <span class=\"token punctuation\">}</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span>reply<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>There‚Äôs a few things that are fishy (pun intended) about this piece of code. For\none, it doesn‚Äôt say what should be done when a specific dinner preference is not\naddressed in the <code class=\"language-text\">switch</code> statement. You could do that by either exhaustively\nlisting all possible dinner preferences, or by adding a <code class=\"language-text\">default</code> case. Another\nissue is that the <code class=\"language-text\">break</code> statements are missing. So when the dinner preference\nis ‚Äúbroccoli‚Äù, the reply will still be ‚Äúwho doesn‚Äôt like carbs and fat?‚Äù, which\nis probably not what you intended. My editor (VS Code) and my compiler/packager\nare perfectly happy with this JavaScript code.</p>\n<p>So Typescript maybe? Let‚Äôs see:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">enum</span> DinnerPreference <span class=\"token punctuation\">{</span>\n  Broccoli<span class=\"token punctuation\">,</span>\n  PizzaHawaii<span class=\"token punctuation\">,</span>\n  Fries\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">commentOnDinnerPreference</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">pref<span class=\"token operator\">:</span> DinnerPreference</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> reply <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>pref<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> DinnerPreference<span class=\"token punctuation\">.</span>Broccoli<span class=\"token operator\">:</span>\n      reply <span class=\"token operator\">=</span> <span class=\"token string\">'yes, very healthy'</span>\n      <span class=\"token keyword\">break</span>\n\n    <span class=\"token keyword\">case</span> DinnerPreference<span class=\"token punctuation\">.</span>PizzaHawaii<span class=\"token operator\">:</span>\n      reply <span class=\"token operator\">=</span> <span class=\"token string\">'who does not like carbs and fat?'</span>\n      <span class=\"token keyword\">break</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span>reply<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Here I actually did get warnings about the missing <code class=\"language-text\">break</code> statements from the\nlinter. But the switch still is not exhaustive and there‚Äôs no feedback on that.</p>\n<p>When I do this in Swift for example, it‚Äôs a lot harder to do this wrong. First,\nthere are no <code class=\"language-text\">break</code> statements in Swift, there is no implicit fall-through. In\nother words: a matching case automatically ‚Äúexits‚Äù the switch, if you want\nfall-through you have to make <em>that</em> explicit. But it gets better: the compiler\ngives an <em>error</em> ‚Äúswitch must be exhaustive‚Äù and offers to automatically add\nstatements for missing cases. That‚Äôs a helpful compiler for you, it reduces the\nnumber of mistakes that you can make!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfUlEQVQoz22S3VKDMBSEeZlaAiQhpAmUUBGttKPO1OmFV977/k+wboL1/+KbE8LJzu5JsunmCc3hDDM/Q7cjitIgFxqiqP/l+7+4ruQGum6htE81e3J7qHCPimIiiuUqNSZyvXwn9KfY9/pHUFQWgpt5yQYKCmlREkkqRfRmgeviH7cXQX0R9NtbuOkINywUNqD2Ozg/wHQDbD/ChhGmHSCqBld0u6ZQJK4LGlIUkhSMLrNHO2LqrhF4oCkMFJtkLomCFiRfiPuWCRydWrrfqAWnHfFoKeqjw4O/wzQ/YJju4I1PTcE4WNbLrIqPeG9th9f5iNN+xnl/wMvxEadpjyOT3Lc9RR2yLSOGacZ2oNN+h46bPQVj9ZxdxJEYcSdrBLdF3wb0vicBY7jBtLuFbzrUdJtJFYfpITmfkodKXk5JRxWrZMRIFS+Leyv+XzH61Vql+a3Wki+j4YW5ZYYxstEDWs7Q2C415Sle/fV0hP4R/fe7lGqD2nTJVLzld54QHHaY4NxPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/f1da60fa8f5ea4406cb36c3bc47a4da4/cbe2e/swift-switch.webp 148w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/3084c/swift-switch.webp 295w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/5ca24/swift-switch.webp 590w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/dad35/swift-switch.webp 885w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/2baf0/swift-switch.webp 1180w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/52977/swift-switch.webp 1390w\"\n          sizes=\"(max-width: 590px) 100vw, 590px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/f1da60fa8f5ea4406cb36c3bc47a4da4/12f09/swift-switch.png 148w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/e4a3f/swift-switch.png 295w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/fcda8/swift-switch.png 590w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/efc66/swift-switch.png 885w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/c83ae/swift-switch.png 1180w,\n/static/f1da60fa8f5ea4406cb36c3bc47a4da4/f1c64/swift-switch.png 1390w\"\n          sizes=\"(max-width: 590px) 100vw, 590px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/f1da60fa8f5ea4406cb36c3bc47a4da4/fcda8/swift-switch.png\"\n          alt=\"Swift gives a compiler error\"\n          title=\"Swift gives a compiler error\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<h2 id=\"clever-data-types-can-help-too\" style=\"position:relative;\"><a href=\"#clever-data-types-can-help-too\" aria-label=\"clever data types can help too permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Clever Data Types can Help Too</h2>\n<p>Let‚Äôs think a bit about <em>validation</em> for a moment. For example, you‚Äôre writing a\nGUI that contains a form, and you need to validate the elements of that form.\nMaking it even more specific: a registration web page where a user can sign up\nfor a new account by providing information like e-mail, phone number, and a\npassword (twice, to prevent typing mistakes).</p>\n<p>This kind of code can easily become a big mess of conditional logic: <strong>if</strong> the\ne-mail field is not empty <strong>and</strong> it is not a valid e-mail address, <strong>then</strong>\nshow an error. And <strong>if</strong> the phone number field is not empty <strong>and</strong> it is not\na valid phone number, <strong>then</strong> show another error. And <strong>if</strong> the password is\nnot empty <strong>and</strong> does not meet the minimum requirements, <strong>then</strong> show yet\nanother error. And <strong>if</strong> any of the above <strong>if</strong>s were true, <strong>then</strong> disable\nthe submit button. And so on. Yes, you can write that code, but it‚Äôs going to be\never so easy to forget cases and combinations of cases.</p>\n<p>So why not use a cleverly designed data type? I‚Äôm not making this up myself,\nsmarter people have already done so, and they call the type <code class=\"language-text\">Either</code>. Typically\nit represents <em>either</em> an error <em>or</em> a valid value. The error case is (by\nconvention) called the <em>left</em> of the <code class=\"language-text\">Either</code>, the valid value is the <em>right</em>.\nSo a variable of the <code class=\"language-text\">Either</code> type could either be <code class=\"language-text\">left(&#39;that e-mail address is\ninvalid&#39;)</code> or it could be <code class=\"language-text\">right(&#39;me@example.com&#39;)</code>.</p>\n<p>This data type comes with an API. This API is designed in such a way that it\nbecomes hard to ‚Äúdo the wrong thing‚Äù. For example, the function that allows you\nto get the valid value out of the <code class=\"language-text\">Either</code> if it‚Äôs a <code class=\"language-text\">right</code>, <em>requires</em> you to\nalso specify what should happen when it‚Äôs a <code class=\"language-text\">left</code>. You can‚Äôt forget, because it\nwon‚Äôt compile<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.</p>\n<p>So how do you use that? Back to our registration page, let‚Äôs define the\nfollowing validation function (in TypeScript):</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> emailValid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>    <span class=\"token comment\">// (1)</span>\n  emailAddress<span class=\"token punctuation\">.</span><span class=\"token function\">parseOneAddress</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span>                   <span class=\"token comment\">// (2)</span>\n    <span class=\"token operator\">?</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span>                                               <span class=\"token comment\">// (3)</span>\n    <span class=\"token operator\">:</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token string\">'invalid email address'</span><span class=\"token punctuation\">)</span>                              <span class=\"token comment\">// (4)</span></code></pre></div>\n<p>On line <code class=\"language-text\">(1)</code>, you see the declaration of the validation function. It‚Äôs argument\nis that string that we want to validate, and the return type is an <code class=\"language-text\">Either</code> of\nwhich both the left hand side and the right hand side are a <code class=\"language-text\">string</code>. That‚Äôs\nbecause the error (left) is a string, and the valid value, namely the email\naddress, is also a string. On line <code class=\"language-text\">(2)</code> we call a library function to parse the\nprovided string and check whether the return value is <code class=\"language-text\">null</code>. When it‚Äôs not, the\nemail address was valid and we return the right on line <code class=\"language-text\">(3)</code>, or when it is\n<code class=\"language-text\">null</code> then we return the left on line <code class=\"language-text\">(4)</code>. Nice and simple.</p>\n<p>Let‚Äôs define a few more.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> phoneValid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>phone<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>\n  <span class=\"token regex\">/[0-9]{10}/</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>phone<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>phone<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token string\">'invalid phone number'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> equalPasswords <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  p1<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  p2<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>p1 <span class=\"token operator\">===</span> p2 <span class=\"token operator\">?</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token string\">'passwords differ'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> minLength <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>\n  s<span class=\"token punctuation\">.</span>length <span class=\"token operator\">>=</span> <span class=\"token number\">8</span> <span class=\"token operator\">?</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password must be at least 8 characters'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> oneCapital <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>\n  <span class=\"token regex\">/[A-Z]/g</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password must have at least one capital'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> oneNumber <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>s<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span>\n  <span class=\"token regex\">/[0-9]/g</span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token function\">right</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password must have at least one number'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Zooming in on the password, we note that there‚Äôs a bunch of different ways in\nwhich a password can be wrong, and we want to capture all of them. So we want to\ncall all of the related password-checking functions, each of which will give an\n<code class=\"language-text\">Either</code> as a result, and then <em>combine</em> those <code class=\"language-text\">Either</code>s. Combining the <code class=\"language-text\">right</code>\nis easy. After all, if it‚Äôs a <code class=\"language-text\">right</code> then the right contains the password, so\nthe combined either should still have the password as a value. How do we combine\nthe left? By converting the left from a string to an array of strings, and then\nconcatenating those arrays. This conversion is called <em>lifting</em>: we lift the\nsingle error string into an array containing that single error string. And now\nthat the lefts are lifted into arrays, we can combine them by concatenating\nthose arrays. If you‚Äôre interested in the source code of <code class=\"language-text\">lift</code>, you can find it\nin the appendix below, but for now it‚Äôs good enough if you conceptually\nunderstand what it does: it converts <code class=\"language-text\">left(&#39;passwords differ&#39;)</code> into\n<code class=\"language-text\">left([&#39;passwords differ&#39;])</code>, for example.</p>\n<h2 id=\"the-scary-bit-\" style=\"position:relative;\"><a href=\"#the-scary-bit-\" aria-label=\"the scary bit  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Scary Bit üò±</h2>\n<p>The library that I‚Äôve been using for this style of (functional) programming in\nTypeScript, is <a href=\"https://gcanti.github.io/fp-ts\">fp-ts</a>. It has some concepts that may seem scary if\nyou‚Äôve never seen them before. But fear not, it‚Äôs actually not that difficult to\nunderstand and use.</p>\n<p>First up: <a href=\"https://dev.to/gcanti/getting-started-with-fp-ts-semigroup-2mf7\">semigroup</a>. A semigroup is just something that supports\n<em>combining</em> things. Or <code class=\"language-text\">concat</code>ing if you like. You can see why we need this,\nright? We need to combine the error strings in the <code class=\"language-text\">left</code>s of all the validation\nresults.</p>\n<p>Then there‚Äôs the function <code class=\"language-text\">getValidation()</code>, which returns a special kind of\n<code class=\"language-text\">Either</code> that knows that the <code class=\"language-text\">left</code>s have to be combined somehow. How, you ask?\nThat‚Äôs defined by the <em>semigroup</em> that you give it.</p>\n<div style=\"text-align: center; font-size: 3em;\">ü§Ø</div>\n<p>Ok ok, relax, you‚Äôll get there. The following piece of code just means: give me\na special <code class=\"language-text\">Validation</code>-kind of an <code class=\"language-text\">Either</code> that knows how to combine <code class=\"language-text\">lefts</code> by\nconcatenating the string arrays that they contain:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getValidation <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/Either'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getSemigroup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/NonEmptyArray'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">applicativeValidation</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getValidation</span><span class=\"token punctuation\">(</span>getSemigroup<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>If you want more details / explanation, I recommend reading their\n<a href=\"https://dev.to/gcanti/getting-started-with-fp-ts-either-vs-validation-5eja\">article</a> about the topic.</p>\n<p>The last scary piece of the puzzle consists of <code class=\"language-text\">sequenceS</code> and <code class=\"language-text\">sequenceT</code>. They\nare basically the same, so let‚Äôs start with <code class=\"language-text\">sequenceT</code> (<code class=\"language-text\">T</code> is for tuple, aka\narray). It needs the <code class=\"language-text\">applicativeValidation</code> we just defined, and then a list of\nour validation functions. It spits out an array of the return values of the\nvalidation functions. Well, sort of. It puts it in an <code class=\"language-text\">Either</code> first. That is,\nunless one or more of those <code class=\"language-text\">Either</code>s was a left, in that case <code class=\"language-text\">sequenceT</code> spits\nthe left which is the array of errors that the applicative validation has\ncreated.</p>\n<p>‚ÄúExample!‚Äù you shout in desperation? Sure thing:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">sequenceT</span><span class=\"token punctuation\">(</span><span class=\"token function\">applicativeValidation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>         <span class=\"token comment\">// (1)</span>\n      <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>minLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>                  <span class=\"token comment\">// (2)</span>\n      <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>oneCapital<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>                 <span class=\"token comment\">// (3)</span>\n      <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>oneNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>                  <span class=\"token comment\">// (4)</span>\n      <span class=\"token function\">lift2</span><span class=\"token punctuation\">(</span>equalPasswords<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span>         <span class=\"token comment\">// (5)</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p>This uses the simple validation functions that we defined above, as well as\n<code class=\"language-text\">lift</code> which we already mentioned, and <code class=\"language-text\">lift2</code> which is the same thing but then\nto lift a validation function that takes two parameters instead of just\none.<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup> It returns an <code class=\"language-text\">Either</code>. When everything is ok, it returns:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>p1<span class=\"token punctuation\">,</span>p1<span class=\"token punctuation\">,</span>p1<span class=\"token punctuation\">,</span>p1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>One <code class=\"language-text\">p1</code> because the return value of line <code class=\"language-text\">(2)</code> is\n<code class=\"language-text\">right(p1)</code>, one because line <code class=\"language-text\">(3)</code> returns <code class=\"language-text\">right(p1)</code>, one for line <code class=\"language-text\">(4)</code> and\none for line <code class=\"language-text\">(5)</code> (because <code class=\"language-text\">equalPasswords</code> also returns <code class=\"language-text\">p1</code> when all was ok).\nHowever, if one or more of those return values was a <code class=\"language-text\">left</code>, the whole thing is\na <code class=\"language-text\">left</code>. For example when the passwords don‚Äôt have a number or an upper case\ncharacter, the return value is:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">left</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'password must have at least one capital'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'password must have at least one number'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>In order to use this as a building block for the entire form validation, we want\na <code class=\"language-text\">passwordValid</code> function that returns only <code class=\"language-text\">right(p1)</code>, not the array of four\n<code class=\"language-text\">p1</code>s, so we <code class=\"language-text\">map</code> the <code class=\"language-text\">Either</code> and get the following password validation\nfunction.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> pipe <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/pipeable'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> constant <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/function'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">passwordValid</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">p1<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  p2<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">sequenceT</span><span class=\"token punctuation\">(</span><span class=\"token function\">applicativeValidation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>minLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>oneCapital<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>oneNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">lift2</span><span class=\"token punctuation\">(</span>equalPasswords<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token function\">constant</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This <code class=\"language-text\">map</code> conceptually is the same as the one you already know for arrays: it\ntakes whatever value is captured (the things in the array, or the right-hand\nside of the either), and applies a function to it. The <code class=\"language-text\">pipe</code> function pipes the\nvalue of an expression into a pipeline of functions. See\n<a href=\"https://gcanti.github.io/fp-ts/modules/pipeable.ts.html#pipe\">example</a>. The function <code class=\"language-text\">constant</code> is a function that always\nreturns the given value. This is needed because <code class=\"language-text\">map</code> requires a <em>function</em> to\nbe applied to the element (the <code class=\"language-text\">right</code> in this case). Instead of <code class=\"language-text\">constant(p1)</code>\nwe could also write <code class=\"language-text\">() =&gt; p1</code>, but this way the intention is more explicit.</p>\n<p>Now it‚Äôs a small step to define the entire form validation function. In this\ncase we use <code class=\"language-text\">sequenceS</code> instead of <code class=\"language-text\">sequenceT</code>. Where <code class=\"language-text\">sequenceT</code> makes an array\nof elements in the <code class=\"language-text\">right</code>, <code class=\"language-text\">sequenceS</code> makes an object:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">validateRegistrationData</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">email<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  phone<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  p1<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  p2<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span>\n  consent<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> RegistrationData<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">sequenceS</span><span class=\"token punctuation\">(</span><span class=\"token function\">applicativeValidation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    email<span class=\"token operator\">:</span> <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>emailValid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    phone<span class=\"token operator\">:</span> <span class=\"token function\">lift</span><span class=\"token punctuation\">(</span>phoneValid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>phone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    password<span class=\"token operator\">:</span> <span class=\"token function\">passwordValid</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Look at that! We have a function that takes all the individual form input\nvalues, and it spits out an object that happens to be my internal user-profile\nrepresentation, or a list of errors!</p>\n<div style=\"text-align: center; font-size: 3em;\">üòé</div>\n<h2 id=\"using-this-in-the-ui\" style=\"position:relative;\"><a href=\"#using-this-in-the-ui\" aria-label=\"using this in the ui permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using This In The UI</h2>\n<p>For the UI part I‚Äôll be using React. Because of it‚Äôs declarative nature it\nmatches very well with the above function style of doing validation. The\ncomponent that we are creating is called <code class=\"language-text\">RegistrationForm</code>. It uses a bunch of\nstate hooks for the individual form input values:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RegistrationForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>email<span class=\"token punctuation\">,</span> setEmail<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>phone<span class=\"token punctuation\">,</span> setPhone<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>password1<span class=\"token punctuation\">,</span> setPassword1<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>password2<span class=\"token punctuation\">,</span> setPassword2<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form.Field</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Email:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>email<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setEmail</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Form.Field</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form.Field</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Phone:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>mobile<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>phone<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPhone</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Form.Field</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form.Input</span></span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>Password<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>password1<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPassword1</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form.Input</span></span>\n          <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>Password again<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>password2<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPassword2</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">primary</span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>Register<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Form</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Easy enough. Now for the interesting part. After declaring the variables for the\nvarious state hooks, we add the call to our validation function. You don‚Äôt need\nto put the type there, TypeScript will infer it for you, but I did so anyway to\nremind you of what our validation function is returning.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">const</span> validationResult<span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>\n    NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    RegistrationData\n  <span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">validateRegistrationData</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">,</span> phone<span class=\"token punctuation\">,</span> password1<span class=\"token punctuation\">,</span> password2<span class=\"token punctuation\">)</span></code></pre></div>\n<p>In Semantic UI, the <code class=\"language-text\">Form</code> element has to know whether there‚Äôs an error in the\nform. That‚Äôs easy, we use the <code class=\"language-text\">isLeft</code> API function of <code class=\"language-text\">Either</code>. So we replace\nthe <code class=\"language-text\">&lt;Form&gt;</code> element with:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> isLeft <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/Either'</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n\n <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form</span></span> <span class=\"token attr-name\">error</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">isLeft</span><span class=\"token punctuation\">(</span>validationResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n   [...]</span></code></pre></div>\n<p>Nice, no conditionals yet. We can use that same construct to enable/disable the\nsubmit button:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">primary</span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>Register<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">isLeft</span><span class=\"token punctuation\">(</span>validationResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>What should happen when we click the ‚ÄòRegister‚Äô button? In my case, since I‚Äôm\nalso using Redux, it should dispatch an action that takes the <code class=\"language-text\">RegistrationData</code>\nas a parameter. We can do that using <code class=\"language-text\">map</code> again. On an <code class=\"language-text\">Either</code>, map performs a\nfunction on value if it‚Äôs a <code class=\"language-text\">right</code>, and leaves it alone if it‚Äôs a <code class=\"language-text\">left</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> map <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/Either'</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">primary</span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>Register<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">isLeft</span><span class=\"token punctuation\">(</span>validationResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reg<span class=\"token operator\">:</span> RegistrationData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">startRegistration</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>validationResult<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>The final piece of the puzzle is the list of error messages. To show that, we\nwant to <code class=\"language-text\">swap</code> the <code class=\"language-text\">Either</code>, meaning that it replaces left and right. That‚Äôs\nbecause we want to do something with the errors which are left, but ‚Äúdoing\nsomething with an Either‚Äù mostly means doing it on a <code class=\"language-text\">right</code>. Also, we use\n<code class=\"language-text\">getOrElse</code>, which is one of those safe API methods that I mentioned. Not only\ndoes it return the <code class=\"language-text\">right</code> of an <code class=\"language-text\">Either</code>, but also do you need to specify what\nhas to happen when the <code class=\"language-text\">Either</code> was a <code class=\"language-text\">left</code>. Here we simply generate an empty\narray in case of a left, and we have to make the TypeScript compiler happy by\nsaying what type that empty array has.</p>\n<p>So we get the array of error message out of the Either and pass it into a\nSemantic UI <code class=\"language-text\">Message</code> element like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Message</span></span>\n          <span class=\"token attr-name\">error</span>\n          <span class=\"token attr-name\">header</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">'registration.formErrors'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'Het formulier is niet goed ingevuld'</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">list</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">getOrElse</span><span class=\"token punctuation\">(</span><span class=\"token function\">constant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>validationResult<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span></code></pre></div>\n<div style=\"text-align: center; font-size: 3em;\">ü•≥</div>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Do you realize what we just did? We created an entry form with input validation.\nIt shows a full list of errors all the time, and updates it <em>as you type</em>. And\nwe did so <strong>without using a single conditional</strong> outside of the individual\nsimple validation functions like <code class=\"language-text\">oneCapital</code>, which is where they belong. And\nas a bonus all those simple validation functions are super-easy to unit-test and\nhighly reusable. The other conditionals that you would normally need are now\nabstracted away in the <code class=\"language-text\">Either</code> and <code class=\"language-text\">Validation</code>, so that you can‚Äôt do it wrong\nanymore. I don‚Äôt know about you, but I‚Äôm happy. üòÄ</p>\n<p>The full source code and a completely working example can be found on\n<a href=\"https://github.com/svdo/either-validation-demo\">github</a>. As a bonus, it also contains a couple of Jest matchers for\nchecking Eithers in unit tests.</p>\n<h2 id=\"a-new-vocabulary\" style=\"position:relative;\"><a href=\"#a-new-vocabulary\" aria-label=\"a new vocabulary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A New Vocabulary</h2>\n<p>There is one last observation that I‚Äôd like to make. All your ‚ÄúC-style‚Äù\nprogramming languages are basically the same. A loop (for, while), a condition,\nsome stuff about objects classes, a switch. When you can write Java, you can\nalso write Swift or C#. Sure, you need to learn some new APIs, but the basic\nbuilding blocks are all the same. It‚Äôs a common vocabulary shared by all these\nlanguages, that allow you to talk and reason about code.</p>\n<p>As I challenge myself to use the functional programming concepts more and more,\nlike I did in this article, I find that it gives me a whole new vocabulary in a\nsimilar way, but on a higher abstraction level. Learn how to use <code class=\"language-text\">fp-ts</code> in\nTypeScript, and you use the same constructs in Haskell, PureScript, Scala, etc.\nSo any investment that you make in learning this stuff is not limited to the\nspecific programming language that you learn it for. And it‚Äôs going to allow you\nto write your code using higher-level abstractions, thereby reducing hopefully\nthe number of bugs.</p>\n<h2 id=\"appendix-lift-and-lift2\" style=\"position:relative;\"><a href=\"#appendix-lift-and-lift2\" aria-label=\"appendix lift and lift2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Appendix: lift and lift2</h2>\n<p>As promised, below are the definitions for <code class=\"language-text\">lift</code> and <code class=\"language-text\">lift2</code>. The actual code\nis quite simple. When you pass a validation function into it (called <code class=\"language-text\">check</code>\nhere), this returns a new function that, when called, first calls the original\nvalidation function and then uses <code class=\"language-text\">mapLeft</code> to put the <code class=\"language-text\">left</code> value in an array.\nIt ignores <code class=\"language-text\">right</code> values. All the type stuff around it may make it look a bit\ndaunting, but if you give it a hard stare you should probably be able to figure\nit out. üßê</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> pipe <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/pipeable'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Either<span class=\"token punctuation\">,</span> mapLeft <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/Either'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NonEmptyArray <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'fp-ts/lib/NonEmptyArray'</span>\n\n<span class=\"token comment\">/**\n * Lifts the error of a validation function into a (non-empty) array.\n * This way multiple validation functions can be composed while appending\n * their errors to the array. This variant is for a validation function\n * with one parameter.\n *\n * lift :: ( a -> Either e,b ) -> ( a -> Either [e], b )\n *\n * @param check single-arg (validation) function of which the error is lifted\n * @see lift2\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> lift<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">B</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">check</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token operator\">:</span> <span class=\"token constant\">A</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Either<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">B</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token operator\">:</span> <span class=\"token constant\">A</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Either<span class=\"token operator\">&lt;</span>NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token constant\">B</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token parameter\">a</span> <span class=\"token operator\">=></span>\n    <span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">check</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">mapLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>e<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/**\n * Lifts the error of a validation function into a (non-empty) array.\n * This way multiple validation functions can be composed while appending\n * their errors to the array. This variant is for a validation function\n * with two parameters.\n *\n * lift :: ( a -> b -> Either e,c ) -> ( a -> b -> Either [e], c )\n *\n * @param check double-arg (validation) function of which the error is lifted\n * @see lift\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> lift2<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">B</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">C</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">check</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token operator\">:</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token constant\">B</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Either<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">C</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token operator\">:</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token constant\">B</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Either<span class=\"token operator\">&lt;</span>NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">E</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token constant\">C</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">check</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">mapLeft</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>e<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>Except when you‚Äôre using JavaScript of course, <a href=\"https://www.destroyallsoftware.com/talks/wat\">because then basically anything goes</a>.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n<li id=\"fn-2\">\n<p>In TypeScript you can probably define <code class=\"language-text\">lift</code> in such a way that it works for both single-parameter and two-parameter functions, but that‚Äôs where I draw the line for now.</p>\n<a href=\"#fnref-2\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"Getting Help From Your Compiler","subtitle":"Using clever data types to reduce the possibilities for mistakes","date":"2020-05-25","slug":"2020/05/25/getting-help-from-your-compiler","language":null,"tags":["functional","typescript","either","validation","react"],"authors":["stefan"],"comments":null,"cover":{"publicURL":"/static/79021e18f6a7cb67941f7dff67465808/cover.jpeg"},"coverLink":null,"coverDescription":"Graffiti art from unknown artist","imageTw":null,"imageFb":null,"asciinema":true}}},"pageContext":{"slug":"2020/05/25/getting-help-from-your-compiler","previous":{"frontmatter":{"title":"Scaling GitHub Action Runners","slug":"2020/05/25/scaling-selfhosted-action-runners","type":"post","tags":["github","ci","aws","terraform","lambda","typescript"],"authors":["niek"]}},"next":null}}}