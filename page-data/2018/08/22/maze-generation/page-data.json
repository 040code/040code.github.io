{"componentChunkName":"component---src-templates-blog-post-js","path":"/2018/08/22/maze-generation","webpackCompilationHash":"4a86779ccf4d1b44ab75","result":{"data":{"markdownRemark":{"id":"a62188bd-545e-5089-a86f-8cb88c4c617e","excerpt":"Introduction During my summer holiday, in between long walks and nice food & drinks, I felt\nlike writing some code for fun. Unfortunately, I…","html":"<h2 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>During my summer holiday, in between long walks and nice food &#x26; drinks, I felt\nlike writing some code for fun. Unfortunately, I didn’t bring my laptop.\nLuckily, <a href=\"https://twitter.com/mfikes\">Mike Fikes</a> created a <a href=\"https://itunes.apple.com/us/app/replete/id1013465639\">ClojureScript REPL\nfor mobile devices</a> to\nwrite some Clojure(script) without a laptop close at hand.</p>\n<p>A REPL, or a Read Eval Print Loop, reads your input, evaluates it, prints the\nresult and waits for new inputs to read. In the meantime, the code you wrote\nlives in REPL memory. So if I define a function in the REPL, it will be read and\nevaluated and in my next input I can call this function, because it lives in\nREPL space.</p>\n<p>So, back to this REPL on my phone. Permanently saving work is not possible in\nthis REPL, there are no debugging capabilities, no code completion, no test\nrunners … just a REPL: 35 characters wide in portrait mode, 79 characters wide\nin landscape mode. To give you an idea of my ‘Integrated Development\nEnvironment’ and the resulting mazes, I recorded a 30 seconds screen cast:</p>\n\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://player.vimeo.com/video/286153487\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          \n<p>At home, I created a gist containing all 70 lines of <a href=\"https://gist.github.com/mmzsource/ee88b93a3829f98fcb6188f2f2162fcf\">maze\ncode</a> (56\nlines according to the command-line tool cloc). In this blog I’m going to explain\nthe concepts and code.</p>\n<h2 id=\"grids-cells-and-neighbours\"><a href=\"#grids-cells-and-neighbours\" aria-label=\"grids cells and neighbours permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Grids, Cells and Neighbours</h2>\n<p>First of all, we’ll need a grid and a coordinate system to point to individual\ncells in the grid. The reason is that most maze generators expect to be able to\ntraverse a grid and lookup information about cells and neighbours of cells.</p>\n<p>A grid can be modeled as a vector of vectors, representing rows and columns:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">def</span> grid\n  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n   <span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">5</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span>\n   <span class=\"token punctuation\">[</span><span class=\"token number\">7</span> <span class=\"token number\">8</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>A cell can be pinpointed by its [row col] coordinate which matches perfectly\nwith the <code class=\"language-text\">get-in</code> function in clojure. This <code class=\"language-text\">get-in</code> function is used to find\nitems in nested data structures. For instance, <code class=\"language-text\">(get-in grid [2 1])</code> will result\nin the value <code class=\"language-text\">8</code>.</p>\n<p>To find the neighbours of a cell, I created a couple of helper functions:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> north-of <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>row col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">dec</span> row<span class=\"token punctuation\">)</span> col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> south-of <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>row col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">inc</span> row<span class=\"token punctuation\">)</span> col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> west-of  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>row col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>row <span class=\"token punctuation\">(</span><span class=\"token keyword\">dec</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> east-of  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>row col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>row <span class=\"token punctuation\">(</span><span class=\"token keyword\">inc</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>The function argument is destructured (taken apart and named) and the\n<code class=\"language-text\">north-of</code>, <code class=\"language-text\">south-of</code>, <code class=\"language-text\">west-of</code> or <code class=\"language-text\">east-of</code> neighbour coordinate is\ncalculated by <code class=\"language-text\">inc</code>rementing or <code class=\"language-text\">dec</code>rementing the row or column number. For\ninstance, <code class=\"language-text\">(north-of [1 1])</code> results in the value <code class=\"language-text\">[0 1]</code>.</p>\n<p>Using the <code class=\"language-text\">juxt</code> function we can now calculate all neighbours in one go. <code class=\"language-text\">juxt</code>\ntakes a variable number of functions as arguments and returns a new function.\nThis new function returns a vector containing the result of applying each\nfunction to the arguments provided. So for instance <code class=\"language-text\">((juxt north-of south-of\nwest-of east-of) [1 1])</code> results in the value <code class=\"language-text\">[[0 1] [2 1] [1 0] [1 2]]</code>.</p>\n<p>Unfortunately, these functions don’t care about the grid. <code class=\"language-text\">((juxt north-of\nsouth-of west-of east-of) [0 0])</code> will happily return <code class=\"language-text\">[[-1 0] [1 0] [0 -1] [0\n1]]</code> containing cell coordinates inside AND outside the grid. Therefore, in\norder to calculate all neighbours <strong>in</strong> the grid, we need to filter out the\nones that are not part of the grid. This results in the following <code class=\"language-text\">neighbours</code>\nfunction:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> neighbours <span class=\"token punctuation\">[</span>grid cell<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">filter</span> #<span class=\"token punctuation\">(</span>get-in grid %<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>juxt north-of south-of west-of east-of<span class=\"token punctuation\">)</span> cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"mazes-and-cells\"><a href=\"#mazes-and-cells\" aria-label=\"mazes and cells permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mazes and Cells</h2>\n<p>Now working with the grid is easy, let’s move on to the maze. A maze is\nbasically a grid, augmented with some information to determine if borders\nbetween cells are open or closed. That information can be easily stored in the\ncells themselves.</p>\n<p>I liked the approach <a href=\"http://fn-code.blogspot.com/2015/04/a-maze-ing-mazes-with-clojure.html\">Mark\nBastian</a>\ntook: in a cell, simply list the coordinates of neighbours the cell is connected\nto. We can even list the coordinates in a set <code class=\"language-text\">#{}</code>, since duplicating neighbour\ncoordinates is useless. A 2x2 ‘maze’ with all borders closed looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>A 2x2 ‘maze’ with an open border between the 2 cells on the left looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>The two connected cells reference each other. It would be convenient to have a\nfunction that updates the grid when a border needs to be removed between 2\ncells:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> remove-border <span class=\"token punctuation\">[</span>grid <span class=\"token number\">c1</span> <span class=\"token number\">c2</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">-></span> grid\n      <span class=\"token punctuation\">(</span>update-in <span class=\"token number\">c1</span> <span class=\"token keyword\">conj</span> <span class=\"token number\">c2</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>update-in <span class=\"token number\">c2</span> <span class=\"token keyword\">conj</span> <span class=\"token number\">c1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"maze-generation\"><a href=\"#maze-generation\" aria-label=\"maze generation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Maze Generation</h2>\n<p>Now it’s time for the maze generation. Luckily I had a copy of the <a href=\"https://www.amazon.com/Mazes-Programmers-Twisty-Little-Passages/dp/1680500554\">‘Mazes for\nProgrammers\nbook’</a>\non my phone. Because I like the texture of the mazes coming out of the recursive\nbacktracker algorithm, I decided to implement that one.</p>\n<p>The algorithm can start on any cell on the grid and I decided to start on <code class=\"language-text\">[0\n0]</code> every single time. Every cell that is visited by the algorithm is pushed on\na stack which I have called the <code class=\"language-text\">backtrackstack</code>. The cell on top of the stack\nis considered the current cell.</p>\n<p>From the current cell, a path is created (<code class=\"language-text\">remove-border</code>) to a randomly\nselected, previously unvisited neighbour. An unvisited neighbour can easily be\ndetected, since it’s simply an empty set <code class=\"language-text\">#{}</code>. That previously unvisited cell\n(<code class=\"language-text\">next</code> in my code) is also pushed unto the stack. This process repeats\ncontinuously until a cell is visited that has no unvisited neighbours. At that\npoint, that dead-end cell is popped of the stack, making the previous cell the\ncurrent cell. Again, the algorithm will check if this cell has unvisited\nneighbours and will either create a path to that unvisited neighbour or pop\nanother cell from the <code class=\"language-text\">backtrackstack</code>. This will continue until every cell has\nbeen visited and the <code class=\"language-text\">backtrackstack</code> is empty.</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> find-unvisited-neighbours <span class=\"token punctuation\">[</span>grid cell<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>n <span class=\"token punctuation\">(</span>neighbours grid cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">filter</span> #<span class=\"token punctuation\">(</span>empty? <span class=\"token punctuation\">(</span>get-in grid %<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> generate-maze <span class=\"token punctuation\">[</span>rows cols<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">loop</span> <span class=\"token punctuation\">[</span>maze           <span class=\"token punctuation\">(</span>create-grid rows cols<span class=\"token punctuation\">)</span>\n         backtrackstack '<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>empty? backtrackstack<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>print-maze maze<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>unvn <span class=\"token punctuation\">(</span>find-unvisited-neighbours maze <span class=\"token punctuation\">(</span><span class=\"token keyword\">first</span> backtrackstack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">(</span><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>empty? unvn<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">(</span><span class=\"token keyword\">recur</span> maze <span class=\"token punctuation\">(</span><span class=\"token keyword\">rest</span> backtrackstack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">next</span> <span class=\"token punctuation\">(</span>rand-nth unvn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">(</span><span class=\"token keyword\">recur</span>\n             <span class=\"token punctuation\">(</span>remove-border maze <span class=\"token punctuation\">(</span><span class=\"token keyword\">first</span> backtrackstack<span class=\"token punctuation\">)</span> <span class=\"token keyword\">next</span><span class=\"token punctuation\">)</span>\n             <span class=\"token punctuation\">(</span><span class=\"token keyword\">conj</span> backtrackstack <span class=\"token keyword\">next</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Fingers crossed:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"> <span class=\"token punctuation\">(</span>generate-maze <span class=\"token number\">4</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n\n <span class=\"token punctuation\">(</span>generate-maze <span class=\"token number\">4</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n\n <span class=\"token punctuation\">(</span>generate-maze <span class=\"token number\">6</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">[</span>#<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span> #<span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Nice! Now the only thing left is printing a more human friendly view of this\nmaze.</p>\n<h2 id=\"maze-printing\"><a href=\"#maze-printing\" aria-label=\"maze printing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Maze Printing</h2>\n<p>First, the top of the maze is printed:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">+---+---+---+</code></pre></div>\n<p>Then, for every row the left border is printed <code class=\"language-text\">|</code> and 2 passes over the cells\nhave to be made. The first pass determines if there should be a border between\nthe current cell and its <code class=\"language-text\">east-of</code> neighbour, resulting in something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">+---+---+---+---+\n|           |   |</code></pre></div>\n<p>The second pass over the row adds a <code class=\"language-text\">+</code> and then determines if there should be a\nborder between the current cell and its <code class=\"language-text\">south-of</code> neighbour, for instance\nresulting in this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">+---+---+---+---+\n|           |   |\n+---+---+   +   +</code></pre></div>\n<p>After repeating this for all rows, a maze like this is printed:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">+---+---+---+---+\n|           |   |\n+---+---+   +   +\n|       |       |\n+   +   +---+   +\n|   |       |   |\n+   +---+   +   +\n|       |       |\n+---+---+---+---+</code></pre></div>\n<p>The code:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> east-open-border? <span class=\"token punctuation\">[</span>maze cell<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">contains?</span> <span class=\"token punctuation\">(</span>get-in maze <span class=\"token punctuation\">(</span>east-of cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> south-open-border? <span class=\"token punctuation\">[</span>maze cell<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">contains?</span> <span class=\"token punctuation\">(</span>get-in maze <span class=\"token punctuation\">(</span>south-of cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> print-cell-body <span class=\"token punctuation\">[</span>maze cell<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>east-open-border? maze cell<span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"    \"</span>\n    <span class=\"token string\">\"   |\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> print-cell-bottom <span class=\"token punctuation\">[</span>maze cell<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>south-open-border? maze cell<span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"   +\"</span>\n    <span class=\"token string\">\"---+\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">defn</span> print-maze <span class=\"token punctuation\">[</span>maze<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>result <span class=\"token punctuation\">(</span>atom <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        rows   <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">count</span> maze<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        cols   <span class=\"token punctuation\">(</span><span class=\"token keyword\">range</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">count</span> <span class=\"token punctuation\">(</span>get-in maze <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">(</span>swap! result <span class=\"token keyword\">conj</span> <span class=\"token string\">\"+\"</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">repeat</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">count</span> cols<span class=\"token punctuation\">)</span> <span class=\"token string\">\"---+\"</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">doseq</span> <span class=\"token punctuation\">[</span>row rows<span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">(</span>swap! result <span class=\"token keyword\">conj</span> <span class=\"token string\">\"|\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">doseq</span> <span class=\"token punctuation\">[</span>col cols<span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">(</span>swap! result <span class=\"token keyword\">conj</span> <span class=\"token punctuation\">(</span>print-cell-body maze <span class=\"token punctuation\">[</span>row col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>swap! result <span class=\"token keyword\">conj</span> <span class=\"token string\">\"\\n\"</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">doseq</span> <span class=\"token punctuation\">[</span>col cols<span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">(</span>swap! result <span class=\"token keyword\">conj</span> <span class=\"token punctuation\">(</span>print-cell-bottom maze <span class=\"token punctuation\">[</span>row col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>swap! result <span class=\"token keyword\">conj</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">println</span> <span class=\"token punctuation\">(</span>s/<span class=\"token keyword\">join</span> <span class=\"token punctuation\">(</span>flatten @result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Finally, we can print all the mazes we want:</p>\n<div class=\"gatsby-highlight\" data-language=\"clojure\"><pre class=\"language-clojure\"><code class=\"language-clojure\"><span class=\"token punctuation\">(</span>generate-maze <span class=\"token number\">4</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n\n+---+---+---+---+\n|   |           |\n<span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+\n|   |   |       |\n<span class=\"token keyword\">+</span>   +---+---+   <span class=\"token keyword\">+</span>\n|   |       |   |\n<span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|       |       |\n+---+---+---+---+\n\n<span class=\"token punctuation\">(</span>generate-maze <span class=\"token number\">4</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n\n+---+---+---+---+\n|       |       |\n+---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|   |   |   |   |\n<span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>\n|   |       |   |\n<span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|               |\n+---+---+---+---+\n\n<span class=\"token punctuation\">(</span>generate-maze <span class=\"token number\">8</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span>\n\n+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+\n|   |               |   |       |                   |       |           |\n<span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+---+   <span class=\"token keyword\">+</span>\n|   |   |   |   |   |   |   |       |   |   |           |           |   |\n<span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+---+   <span class=\"token keyword\">+</span>   +---+---+---+---+---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|       |   |       |   |   |           |           |   |           |   |\n+---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+---+   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+---+   <span class=\"token keyword\">+</span>\n|   |       |   |       |   |   |       |   |       |       |           |\n<span class=\"token keyword\">+</span>   +---+---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   +---+   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|           |   |   |   |       |   |           |   |   |   |   |   |   |\n<span class=\"token keyword\">+</span>   +---+---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   +---+---+---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|   |           |   |       |       |   |           |   |       |   |   |\n<span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+---+---+---+   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|   |   |               |   |       |   |       |   |       |   |   |   |\n<span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>   +---+   +---+   +---+---+   <span class=\"token keyword\">+</span>   +---+   <span class=\"token keyword\">+</span>   +---+   +---+   <span class=\"token keyword\">+</span>   <span class=\"token keyword\">+</span>\n|               |                   |           |                   |   |\n+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+</code></pre></div>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>So there you have it: a maze generator in ~ 30 lines of code with a 30 lines of\ncode ascii view on top of it, build with nothing but a REPL on a phone. I really\nenjoyed the puzzle and the small (and large) successes while working in the\nREPL. I hope you enjoyed this recap.</p>\n<p>I’d like to thanks <a href=\"https://twitter.com/mfikes\">Mike Fikes</a> for his excellent\nClojureScript REPL, <a href=\"https://twitter.com/mark_bastian\">Mark Bastian</a> for the\ninspiration for the maze data structure, <a href=\"https://twitter.com/jamis\">Jamis Buck</a>\nfor his lovely ‘Mazes for programmers’ book and <a href=\"https://twitter.com/gertgoet\">Gert\nGoet</a> for reviewing an earlier version of this\nblog. Faults and not-so-idiomatic Clojure code remaining are my own.</p>\n<p>Back home, I’m happy to be working in Emacs with the excellent Clojure CIDER\nplugin again. Which reminds me that during my holiday I visited a picturesque\nCIDER factory in France. Cheers!</p>\n<a href=\"#\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 73.52941176470587%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD70lEQVQ4yzWS60+TZxiH+x8s+2DMEmMWtynLXGQbExCVbclgg+kYEicyCEipECggyIwHHJsip6pTAhNRkUOhCGhRljjAw0TAUrCUlh4olIITlFMpwlz25drzVvfhl991H97nfp47r+zCoQjqSxSoi+ReSVz3mtXFSdQV7KNWpUR9/kfBCdQWJlJXKHISnxIS9Zr8eKpPxFGeswOZ5nwGsws2ZuctPJ8bZka4xDOCpXjebcX1xIBz4jFzC1Zv/n89nzULN4v+YaaeGbkqBogDM5nzOPC8GGFJ0rID95LEDi8veOyi5mB5ZdTL3try637h84t2oREx3EJ1QSKy5vJs5kTCaB+gz6znnr6XAWs/j4X6Lf0YbAN0D+rQD+uxOgd5KFhn6vP2dxt1TE6ZcItB0mtqpANbyrPEBAeWMQPDQiaHgZGJIYaEG+yPGXtiErER6/ggE1Nmb2x3GbGNG72907MW5tx2r9cVJSFrKs1kViTcHhuepVc+77Z4fVFMlnYosXQLaYcL7ld9L1aktViZX7CwvGxjZcWGRpX06oYvXrrwLI8x9dwqGl28/Pcpi0tjYl9id/+4WBS1haVRlv4exyN2+WxmhNHJcRx/TdE7aKZD76Lxrou2G1pkbfVl9Ooe0dV1jxtaLdpWLUUlKvr6e7FZddztaKbzTis93bfp6WpD1/sHPT0PiPo+gQTlKVLyW4kuMKN5BCM2O7IrpYUkJ6ejSJSTtC+R3bsiCQ0NRdPYSFPNWWJ2foI8cgtH5SHEhmxEHu5Pa3MTu78LYXtwEH6bt7MjKh6jycrDjlZkV8/lcSAjjezUBHJz0shSKojbE0llxUX0f2q4rNrP4eQwjii/JXVPAHtC/NA2qdnyuR9rfd5m/SYffHzfF9rEybxDyKp/zSUrXUlq4l6O5CjJPZzNzvCvKSsr58GtWvIOikFZezmUFoFK+QV1pQdo09bz3gcbeOfddaxZs5ZVq9fwxqrVHMxMRlZ77hjpSiXhX31J2FY/Yj77iI0b1pOfn4+pu50cZSJ7o0Lx/3Ad3wR/iq6jjvZbGrYKDgr8mMDN/vj6+hHgF8ix7Axk6vNHUSjEM3+IJiE6ipSYXcTFxqLRNFBVpUaxX0lMZBgb3noT1U8ZmO5fp6vjJgOD4j8dMtGtN2Ew2XA4Jxg2GZFd+y0P5+Q0E5OT2EZdOMddTD+dxDlqFx9YGbI6MRjNtHfexzpsZm52htstVVyvLOD3mtPcvHyK1spfuH7hOA1nspCdzY6kRpWN+nQmV04quPRzPJeOx6DKjKChopD2axdob6qgs6WSOy0Xud10iSsn5BTLAyhOCqJEEcTplG2UCD6TEsx/EMFw6CvifJ4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/1e404e8ffcec755960604bc6e57072cc/cc182/CIDER.webp 148w,\n/static/1e404e8ffcec755960604bc6e57072cc/f7e40/CIDER.webp 295w,\n/static/1e404e8ffcec755960604bc6e57072cc/1a2f4/CIDER.webp 590w,\n/static/1e404e8ffcec755960604bc6e57072cc/4837b/CIDER.webp 885w,\n/static/1e404e8ffcec755960604bc6e57072cc/2f819/CIDER.webp 1180w,\n/static/1e404e8ffcec755960604bc6e57072cc/bdd6f/CIDER.webp 1360w\" sizes=\"(max-width: 590px) 100vw, 590px\" type=\"image/webp\">\n        <source srcset=\"/static/1e404e8ffcec755960604bc6e57072cc/cf440/CIDER.png 148w,\n/static/1e404e8ffcec755960604bc6e57072cc/d2d38/CIDER.png 295w,\n/static/1e404e8ffcec755960604bc6e57072cc/b9e4f/CIDER.png 590w,\n/static/1e404e8ffcec755960604bc6e57072cc/f9b6a/CIDER.png 885w,\n/static/1e404e8ffcec755960604bc6e57072cc/2d849/CIDER.png 1180w,\n/static/1e404e8ffcec755960604bc6e57072cc/2f8d2/CIDER.png 1360w\" sizes=\"(max-width: 590px) 100vw, 590px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/1e404e8ffcec755960604bc6e57072cc/b9e4f/CIDER.png\" alt=\"CIDER factory\" title=\"CIDER factory\" loading=\"lazy\">\n      </picture>\n    </span>\n</a>\n<p>Please share your comments, suggestions and thoughts about this blog post on\n<a href=\"https://twitter.com/mmz_\">twitter.com/mmz_</a>. Thanks for reading and Happy\nCoding!</p>\n<h2 id=\"links\"><a href=\"#links\" aria-label=\"links permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Links</h2>\n<ul>\n<li><a href=\"https://www.amazon.com/Mazes-Programmers-Twisty-Little-Passages/dp/1680500554\">‘Mazes for Programmers\nbook’</a></li>\n<li><a href=\"https://itunes.apple.com/us/app/replete/id1013465639\">ClojureScript REPL\nfor mobile devices</a></li>\n<li><a href=\"https://gist.github.com/mmzsource/ee88b93a3829f98fcb6188f2f2162fcf\">Maze generation\ncode</a></li>\n<li><a href=\"https://clojure.org/guides/repl/introduction\">Excellent ‘Programming at the REPL’\ndocumentation</a></li>\n</ul>","frontmatter":{"title":"Maze Generation","subtitle":"Generating Mazes from the REPL","date":"2018-08-22","slug":"2018/08/22/maze-generation","language":null,"tags":["clojure","functional"],"authors":["maarten"],"comments":null,"cover":{"publicURL":"/static/htc-roof-15facbba55a16b853fe086464f31ff96.jpg"},"coverLink":null,"coverDescription":null,"imageTw":{"publicURL":"/static/2018-08-22-maze-generation-tw-409593aa2575ccaab4f5af74a120b42e.png"},"imageFb":{"publicURL":"/static/2018-08-22-maze-generation-fb-4fce98ecef460e0588aef42fd1f3b1fc.png"},"asciinema":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"2018/08/22/maze-generation","previous":{"frontmatter":{"title":"Microhack Brew your code","slug":"2018/08/08/microhack-brew-your-code","type":"post","tags":["microhack","mac","brew"],"authors":["jeroen"]}},"next":{"frontmatter":{"title":"Full Stack Fest 2018","slug":"2018/09/05/full-stack-fest-2018","type":"post","tags":["iot","cloud","fullstack","microservices","security"],"authors":["jeroen","niek"]}}}}}